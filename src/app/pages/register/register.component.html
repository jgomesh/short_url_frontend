<section class="cmp-register">
  <section class="cmp-register--container-limit">
      <div class="cmp-register--container-register">
          <h2>Create an Account</h2>
          @if (successMessage) {
              <span class="success-message">{{successMessage}}</span>
          } @else {
              <form>
                  <div class="form-group">
                      <input #name 
                             [class.input-error]="nameError" 
                             type="text" 
                             placeholder="Name" 
                             (keydown)="onSubmit(name, email, password, confirmPassword, $event)"
                             required>
                      @if (nameError) {
                          <div class="error-message">Name is required!</div>
                      }
                  </div>
      
                  <div class="form-group">
                      <input #email 
                             [class.input-error]="emailError" 
                             type="email" 
                             placeholder="E-mail" 
                             (keydown)="onSubmit(name, email, password, confirmPassword, $event)"
                             required>
                      @if (emailError) {
                          <div class="error-message">Invalid email format!</div>
                      }
                  </div>
      
                  <div class="form-group">
                      <input #password 
                             [class.input-error]="passwordError" 
                             type="password"
                             (keydown)="onSubmit(name, email, password, confirmPassword, $event)"
                             placeholder="Password" 
                             required>
                      @if (passwordError) {
                          <div class="error-message">
                            Password must be at least 6 characters long!
                          </div>
                      }
                  </div>
      
                  <div class="form-group">
                      <input #confirmPassword 
                             [class.input-error]="passwordError" 
                             type="password"
                             (keydown)="onSubmit(name, email, password, confirmPassword, $event)"
                             placeholder="Confirm Password" 
                             required>
                      @if (passwordError) {
                          <div class="error-message">Passwords do not match or are empty!</div>
                      }
                  </div>

                  @if (loading) {
                      <button 
                      [attr.disabled]="loading"
                      type="button">Loading... (Sometimes server is slow if it's free)</button>
                  } @else {
                      <button (click)="onSubmit(name, email, password, confirmPassword)" 
                            type="button">Register</button>
                  }
                  
                  <div class="login-link">
                      Already have an account? <a routerLink="/login">Login here</a>
                  </div>
              </form>
          }
      </div>
      <div class="cmp-register--container-image">
          <img src="assets/cut.jpg" alt="Tesoura Cortando">
      </div>
  </section>
</section>
